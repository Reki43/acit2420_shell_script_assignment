#!/usr/bin/env bash


usage() {
  echo "Usage: $0 [-h] [-p] [-s]"
  echo ""
  echo "    -h, --help          Display help"
  echo "    -p, --packages      Execute package installer"
  echo "    -s, --symlink       Execute symlink creation script"
  exit 1
}

# Default values
execute_package_installer=0
execute_symlink=0


# Parse command-line options
while getopts "hps" opt;
do
  case $opt in
    h)
      usage
      ;;
    p)
      execute_package_installer=1
      ;;
    s)
      execute_symlink=1
      ;;
    ?)
      echo "Invalid option: -$OPTARG"
      usage
      ;;
  esac
done



# Runs both scripts if no options are selected
if [ "$execute_package_installer" -eq 0 ] && [ "$execute_symlink" -eq 0 ];
then
  echo "Running ./config_scipt ..."
  ./package_installer.sh
  ./config_symlink.sh
fi

# Run the package installer if selected
if [ "$execute_package_installer" -eq 1 ];
then
  if [[ -x ./package_installer.sh ]];
  then
    echo "Running package installer script..."
    ./package_installer.sh
  else
    echo "package_installer.sh not found or not executable"
    exit 1
  fi
fi


# Run the symlink creation script if selected
if [ "$execute_symlink" -eq 1 ];
then
  if [[ -x ./config_symlink.sh ]];
  then
    echo "Running symlink creation script..."
    ./config_symlink.sh
  else
    echo "config_symlink.sh not found or not executable"
    exit 1
  fi
fi
